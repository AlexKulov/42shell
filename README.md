# 42shell - это оболочка 42 для разработки и тестирования бортовых алгоритмов управления

Этот репозиторий основан на оригинальном проекте 42, который является его подмодулем.
Большими преимуществами проекта 42 являются 
1) то, что он написан на единственном "базовом" языке программирования С и
2) то, что он обладает значительными возможностями моделирования: орбитального и углового движения, 
межпланетных перелётов и нескольких аппаратов одновременно 
Более подробно https://github.com/ericstoneking/42

## Структура репозитория
```
-- 42shell
    |-- 42
    |   |-- Contains a origin 42 repo
    |-- 42change
    |   |-- Contains a change 42 code files like 42 strucure
    |-- 42support
    |   |-- Contains freeglut and glew library
    |   |-- Contains code files (QtSource) only Qt lib (Qt5 m.b. more)
    |   |-- Contains qt project file for build from ../42 folder
    |-- 42InOutSimplest
    |   |-- Like 42/InOut, but demo example for 42shell repo
    |-- cAlgorithms
    |   |-- Contains user algorithms (on-board and other)
```

## Предпосылки

1) загрузите этот репозиторий на свой компьютер с учётом подмодуля 42
(git clone --recursive https://github.com/AlexKulov/42shell.git)
2) установите на свой компьютер Qt (тестировалось на Qt5.12). 
При установке Qt5 (м.б. Qt6) обязательно добавьте компилятор MinGW 32(64)-bit

## Быстрый старт для Windows

0) скопируйте dll файлы из папок 42support/glew и 42support/freeglut в папку 42 
(чтобы запускать exe-файл, который компилируется в этой папке)
1) откройте файл 42support/42.pro через Qt Creator, нажмите "Подробнее" и выбирете директорию 
42support для всех трёх случаев (Отладка-Выпуск-Проифлирование) и нажмите конопку "Настроить проект" 
2) запустите проект на выполнение (слева внизу зелёный треугольник с жуком)
3) на появившемся виджете нажмите кнопку "Старт"

в итоге должна появится 3D графика, а также должны начать отрисовываться графики

## Тестовый пример

Мной были разработаны и настроены 4 тестовых режима: 3 одноосных (Солнце, надир и цель на Земле)
и 1 трёхосный - ориентация в LVLH (в русскойязычной терминологии это похоже на орбитальную СК).
Чтобы запустить пример, Вам необходимо осуществить быстрый старт. После успешного моделирования из папки 
c исходными данными (ИД) 42/nOut (это папка ИД по умолчанию), Вы должны выбрать другую папку ИД.

### Как выбрать папку с ИД?
Чтобы указать папку с ИД для программы 42 необходимо ввести путь до ИД в первом параметре запуска.
Из командной строки это будет выглядеть примерно так
./42.exe InOut

При запуске в Qt Creator это также можно реализовать следующим образом:
1) открыть вкладку Проекты (слева иконка зелёного ключа)
2) в разделе "Сборка и запуск" выбрать "Запустить" (также в левой части окна)
3) Найти строку для ввода с названием "Параметры командной строки"
4) в командной строке ввести ../42InOut4Mode

Теперь можно запускать программу (опять зелёная кнопка с жуком) и нажать кнопку "Старт".

Сценарий моделирования: сначала КА ориентируется на Солнце осью b3, после входа в тень и потери Солнца ось b3 
переориентируется в надир (это происходит примерно над Атлантикой), при выход из тени в полутень доплняется ориентация
осей b1 и b2: b1 по направлению полёта, b2 перпендикулярна плоскости орбиты (это LVLH ориентация), затем пролетая над 
Австралией, КА нацеливает b3 на город Джаяпура (Индонезия) с координатами 140.71 градусов в.д. и 2.5 ю.ш.
Сценарий смены режимов описан в файле 42InOut4Mode/Inp_Cmd.txt